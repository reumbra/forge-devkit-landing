---
import Container from "@shared/ui/Container.astro";
import SectionLabel from "@shared/ui/SectionLabel.astro";
import StepConnector from "@shared/ui/StepConnector.astro";
import Badge from "@shared/ui/Badge.astro";
import { howItWorks } from "@shared/config/how-it-works";
---

<section id="how-it-works" class="py-24 md:py-32">
	<Container>
		{/* Section label + headline */}
		<div class="mb-16 text-center">
			<SectionLabel text={howItWorks.sectionLabel} />
			<h2
				class="mt-4 font-sans text-[36px] font-bold leading-[1.1] tracking-[-0.02em] text-text md:text-[48px]"
			>
				{howItWorks.headline}
			</h2>
		</div>

		{/* Step connector â€” desktop only */}
		<StepConnector steps={howItWorks.steps.length} class="mb-10 px-4" />

		{/* 4 step cards */}
		<div class="grid gap-8 md:grid-cols-4">
			{
				howItWorks.steps.map((step) => (
					<div class="text-center md:text-left">
						{/* Mobile step number */}
						<div class="mb-3 flex items-center justify-center gap-2 md:hidden">
							<div class="flex h-7 w-7 shrink-0 items-center justify-center rounded-full border border-secondary/30 font-mono text-[12px] font-medium text-secondary">
								{step.number}
							</div>
						</div>

						{/* Step label */}
						<p class="font-mono text-[12px] font-medium uppercase tracking-[0.15em] text-secondary">
							{step.label}
						</p>

						{/* Command */}
						<p class="mt-2 font-mono text-[14px] leading-[1.5] text-text">
							{step.command}
						</p>

						{/* Description */}
						<p class="mt-1 font-sans text-[14px] leading-[1.6] text-text-muted">
							{step.description}
						</p>
					</div>
				))
			}
		</div>

		{/* Platform badges row */}
		<div class="mt-12 flex flex-wrap items-center justify-center gap-3">
			<span class="font-sans text-[14px] text-text-muted">Works everywhere:</span>
			{
				howItWorks.platformBadges.map((badge) => (
					<Badge text={badge.label} size="sm" />
				))
			}
		</div>

		{/* Disposable callout */}
		<p class="mt-6 text-center font-sans text-[16px] leading-[1.6] text-text-muted">
			{howItWorks.disposableCallout}
		</p>
	</Container>
</section>
